function mapLoad(){
	var newCenter = new google.maps.LatLng(39.7392, -104.9847);
	var newZoom = 11;
	
	var mapType = 'region';

	var map = new google.maps.Map(document.getElementById("gmap"), {
		center: newCenter,
		zoom: newZoom,

		zoomControlOptions: {
			style: google.maps.ZoomControlStyle.SMALL,
			position: google.maps.ControlPosition.TOP_RIGHT
		},
		scrollwheel: false,
		scaleControl: false,
		streetViewControl: true,
		panControl: false,
		mapTypeControl: false,
		mapTypeId: 'roadmap'
	});
	
	var iStoreNum = gon.stores.length
	
	for(i=0; i < iStoreNum; i++){
		//console.log(gon.stores[i].name + "," + gon.stores[i].lat + "," + gon.stores[i].lng
		var name = gon.stores[i].name
		var lat = gon.stores[i].lat
		var lng = gon.stores[i].lng
		var point = new google.maps.LatLng(
			 lat, lng
		);
		var marker = new google.maps.Marker({
			map: map,
			position: point,
			icon: "<%= asset_path  'foodtruck-marker.png' %>",
			title: name
		});
		
		bindInfoWindow(marker, name, map);
	}
}

function bindInfoWindow(marker, name, map){
	
	var infowindow = new google.maps.InfoWindow({
		content: name
	})
	
	google.maps.event.addListener(marker, 'click', function(){
		infowindow.open(map,marker);
	});
}

google.maps.event.addDomListener(window, "load", mapLoad);
